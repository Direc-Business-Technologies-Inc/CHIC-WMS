@typeparam TItem;

<MacroBreadcrumbs Breadcrumbs="@InitialPageParameter.Breadcrumbs">
	@if (InitialPageParameter.CanAdd)
	{
		<a class="btn btn-primary float-end" href="@(InitialPageParameter.Link)?Id=0" type="button">
			<i class="bx bx-plus me-2"></i>
			<span class="d-none d-lg-inline-block">Add</span>
		</a>
	}
</MacroBreadcrumbs>

<div class="row row-cols-12">
	<div class="col">
		<div class="card py-1 pb-0">
			<MacroContainer>
				<div class="col">
					<table id='dt-@InitialPageParameter.PageName.ToLower().Trim()' class='datatables-basic table border rounded table-striped'>
						<!-- table data here -->
						<thead>
							<tr>
								@foreach (var item in InitialPageParameter.ParamTableColumns)
								{
									<th>@item.Value</th>
								}
								<th style="text-align:center">Action</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var item in ParamTable)
							{
								<tr>
									@foreach (var column in InitialPageParameter.ParamTableColumns)
									{
										<td>@(item?.GetType()?.GetProperty(column.Key)?.GetValue(item, null) ?? "")</td>
									}
									<td style="text-align:center">
										<a class="btn btn-label-info btn-sm" id="btn-select-@InitialPageParameter.PageName.ToLower().Trim()" title="Select" href="@(InitialPageParameter.Link)?Id=@(item?.GetType()?.GetProperty(InitialPageParameter.ParamTableColumns[0].Key)?.GetValue(item, null) ?? "")"><span class="fa-solid fa-eye"></span></a>
										@*<button class="btn btn-primary btn-sm" id="btn-select-plan" title="Select" data-code="@(item.GetType().GetProperty(SelectTableParameter.ParamTableColumns[0]).GetValue(item, null))"><i class="fa fa-hand-point-left"></i></button>*@
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			</MacroContainer>
		</div>
	</div>
</div>

@code {
	[Parameter]
	public IEnumerable<TItem> ParamTable { get; set; } = default!;

	[Parameter]
	public InitialPageParameterModel InitialPageParameter { get; set; } = new InitialPageParameterModel();

	[Inject] protected IJSRuntime JSRuntime { get; set; } = default!;
	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (firstRender)
		{
			await JSRuntime.InvokeVoidAsync("InitializeDatatable", $@"dt-{@InitialPageParameter.PageName.ToLower().Trim()}");
		}
	}
}